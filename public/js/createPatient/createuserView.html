<!-- public/views/nerd.html -->

<div class="container">
  <div class="row pageHeader">
    <b>{{ tagline }}
      <b/>
  </div>  
  <div class="form-group row">
    <div class="col-md-10">
        <label for="patient">Search to edit Patient</label>
    </div>
    <div class="col-md-8">
        <input name="patient" id="patient" type="text" placeholder="Please Enter Name" ng-model="newPateintSelected"
        uib-typeahead="p as p.firstName +' '+ p.lastName for p in patient | filter:$viewValue | limitTo:8" 
        class="form-control" typeahead-editable="false"
        typeahead-on-select="onSelect($item, $model, $label)">
    </div>
  </div>
  <div class="row"  ng-show="!addAnother">
    <div class="row addSection text-center">        
      <input type="button" ng-click="addAnotherClick()" class="btn btn-success" value="Add New Patient" />
    </div>
  </div>
  <div class="form-group addSection" ng-show="addAnother">
    <div class="row">
      <div class="col-md-6">
        <div class="form-group row">
          <label class="col-md-4">First Name</label>
          <div class="col-md-6">
            <input class="form-control" type="text" ng-model="newPateint.FirstName">
          </div>
        </div>
        <div class="form-group row">
          <label class="col-md-4">Last Name</label>
          <div class="col-md-6">
            <input class="form-control" type="text" ng-model="newPateint.LastName">
          </div>
        </div>
        <div class="form-group row">
          <label class="col-md-4">Age </label>
          <div class="col-md-6">
            <input class="form-control" type="number" ng-model="newPateint.Age">
          </div>
        </div>
        <div class="form-group row">
          <label class="col-md-4">Father/Husband Name</label>
          <div class="col-md-6">
            <input class="form-control" type="text" ng-model="newPateint.CareOfName">
          </div>
        </div>
        <div class="form-group row">
          <label class="col-md-4">Gender</label>
          <div class="col-md-6">
            <select class="form-control" ng-model="newPateint.Gender" ng-options="option.name for option in genderList track by option.id"></select>
          </div>
        </div>
        <div class="form-group row">
          <label class="col-md-4">Contact</label>
          <div class="col-md-6">
            <input class="form-control" type="number" ng-model="newPateint.Mobile" ng-maxlength="10">
          </div>
        </div>
        <div class="form-group row">
          <label class="col-md-4">EMail</label>
          <div class="col-md-6">
            <input class="form-control" type="email" ng-model="newPateint.Email">
          </div>
        </div>
        <div class="form-group row">
          <label class="col-md-4">Occupation</label>
          <div class="col-md-6">
            <select class="form-control" ng-model="newPateint.Occupation" ng-options="option.Desc for option in occupation | orderBy:'Desc' track by option.Desc"></select>
            <!-- {{newPateint.Occupation}} -->
          </div>
        </div>
        <div class="form-group row">
          <label class="col-md-4">Address</label>
          <div class="col-md-6">
            <textarea class="form-control" rows="3" ng-model="newPateint.Address"></textarea>
          </div>
        </div>
        <div class="form-group row">
          <label class="col-md-4">Location</label>
          <div class="col-md-6">
            <select class="form-control" ng-model="newPateint.Location" ng-options="option.Desc for option in location | orderBy:'Desc' track by option._id"></select>
            <!-- {{newPateint.Occupation}} -->
          </div>
        </div>
        <div class="form-group row">
          <label class="col-md-4">Center</label>
          <div class="col-md-6">
            <select class="form-control" ng-model="newPateint.Center" ng-options="option.Desc for option in center | orderBy:'Desc' track by option._id"></select>
            <!-- {{newPateint.Occupation}} -->
          </div>
        </div>
        <div class="form-group row">
          <label class="col-md-4">Chief Complaints</label>
          <div class="col-md-6">
            <textarea class="form-control" rows="3" ng-model="newPateint.CheifComplaint"></textarea>
            <!-- <select class="form-control" ng-model="newPateint.CheifComplaint"
                  ng-options="option.Desc for option in chiefComplaints track by option._id" multiple></select> -->
          </div>
        </div>
        <div class="form-group row">
          <label class="col-md-4">Diagnosis</label>
          <div class="col-md-6">
            <select class="form-control" ng-model="newPateint.Diagnosis" ng-options="option.Desc for option in diagnosis | orderBy:'Desc' track by option._id"
              multiple></select>
          </div>
        </div>
        <div class="form-group row">
          <label class="col-md-4">Treatments</label>
          <div class="col-md-6">
            <select class="form-control" ng-model="newPateint.Treatments" ng-options="option.Desc for option in treatments | orderBy:'Desc' track by option._id"
              multiple></select>
          </div>
        </div>
        <div class="form-group row">
          <label class="col-md-4">Reference</label>
          <div class="col-md-6">
            <select class="form-control" ng-model="newPateint.Reference" ng-options="option.Desc for option in refer | orderBy:'Desc' track by option._id"></select>
            <!-- {{newPateint.Occupation}} -->
          </div>
        </div>
        <div class="form-group row">
          <label class="col-md-4">Doctor</label>
          <div class="col-md-6">
            <select class="form-control" ng-model="newPateint.Doctor" ng-options="option.Desc for option in doctor | orderBy:'Desc' track by option._id"></select>
          </div>
        </div>
        <div class="form-group row">
          <label class="col-md-4">Select Date</label>
          <div class="col-md-6">
            <input type="date" class="form-control" ng-model="newPateint.entryDate" dateformat="d M y"/>
          </div>
        </div>
      </div>
      <div class="col-md-6">        
        <div class="form-group row">
          <label class="col-md-4">Avatar</label>
          <div class="col-md-6">
            <input type="file" fileinput="file" filepreview="filepreview" />
          </div>
          <div class="col-md-6">
            <img ng-src="{{filepreview}}" class="img-responsive" ng-show="filepreview" />
          </div>
          <!--<div class="col-md-6">
               <img ng-src="data:image/png;base64,{{image}}"/></div>
              <img ng-src="{{image}}" class="img-responsive"/></div> -->
        </div>

        <div class="form-group row" ng-if="showPreviousProblems">
          <div class="form-group row tableSection">
            <table class="table table-striped table-hover">
              <thead>
                <tr>
                  <th class="text-center success">Chief Complaints</th>
                  <th class="text-center success">Diagnosis</th>
                  <th class="text-center success">Treatments</th>
                  <th class="text-center success">Date</th>                  
                </tr>
              </thead>
        
              <tbody>
                <tr ng-repeat="x in newPateint.previousProblems | orderBy:'Date'">
                  <td class="" ng-model="x.ChiefComplaint">{{x.ChiefComplaint}}</td>
                  <td class="" ng-model="x.Treatments">{{x.Treatments}}</td>
                  <td class="" ng-model="x.Diagnosis">{{x.Diagnosis}}</td>
                  <td class="" ng-model="x.Date">{{x.Date}}</td>                  
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    <div class="row text-center">
      <input type="button" ng-click="addPatient()" class="btn btn-success" value="Save" />
    </div>
  </div>  

  <!-- Table for data -->
  <div class="form-group row tableSection">
    <table class="table table-striped table-hover">
      <thead>
        <tr>
          <th class="text-center success">First Name</th>
          <th class="text-center success">Last Name</th>
          <th class="text-center success">Mobile</th>
          <th class="text-center success">Location</th>
          <th class="text-center success">Date</th>
          <th class="text-center success"></th>
          <th class="text-center success"></th>
        </tr>
      </thead>

      <tbody>
        <tr ng-repeat="x in patient | orderBy:'firstName'">
          <td class="" ng-model="x.FirstName">{{x.firstName}}</td>
          <td class="" ng-model="x.LastName">{{x.lastName}}</td>
          <td class="" ng-model="x.Mobile">{{x.mobile}}</td>
          <td class="" ng-model="x.Address">{{x.address}}</td>
          <td class="" ng-model="x.Address">{{x.created_at}}</td>
          <td class="text-center">
            <input type="button" ng-click="deletePatient(x._id)" class="btn btn-danger btn-sm" value="Delete" />
          </td>
          <td class="text-center">
            <input type="button" ng-click="editPatients(x._id)" class="btn btn-primary btn-sm" value="Update" />
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>